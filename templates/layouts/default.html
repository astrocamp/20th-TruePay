{% load static %} {% load merchant_tags %}
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      href="{% static 'styles/app.css' %}"
      rel="stylesheet"
      type="text/css"
    />
    <script src="{% static 'scripts/app.js' %}" defer></script>


    <title>{% block title %}TruePay 首頁{% endblock %}</title>
  </head>
  <body class="bg-brand-white text-brand-grayDark font-sans">
    <!-- 導覽列 -->

    <nav class="bg-brand-white border-b border-brand-grayBorder px-4 py-3">
      <div class="max-w-screen-xl mx-auto flex items-center justify-between">
        <!-- 左側：手機時顯示漢堡 + 品牌 -->
        <div class="flex items-center gap-3">
         <!-- 漢堡按鈕 (手機版) -->
          <button id="menu-toggle" class="md:hidden p-2 text-brand-grayDark focus:outline-none" 
                data-action="toggle-menu" data-menu-id="mobile-menu" data-brand-id="nav-brand"
                aria-expanded="false">
            ☰
          </button>
          <!-- 品牌名稱 (桌機版才顯示 / 手機展開時隱藏) -->
          <a id="nav-brand" href="{% url 'pages:home' %}" class="text-lg font-bold text-brand-black md:text-xl">TruePay</a>
      </div>
        <!-- 桌機版選單 -->
        <ul class="hidden md:flex items-center gap-6 text-sm font-medium">
          <li>
            <a
              href="{% url 'pages:home' %}"
              class="text-[#0056B3] hover:underline"
              >首頁</a
            >
          </li>
          <li>
            <a
              href="{% url 'pages:about' %}"
              class="text-brand-grayDark hover:text-[#0056B3]"
              >關於</a
            >
          </li>
          <li>
            <a
              href="{% url 'pages:contact' %}"
              class="text-brand-grayDark hover:text-[#0056B3]"
              >聯絡</a
            >
          </li>
          {% if user.is_authenticated %}
            {% if user.username|slice:":9" == "merchant_" %}
              <li>
                <a
                  href="{% get_current_merchant %}"
                  class="text-brand-grayDark hover:text-[#0056B3]"
                  >商家後台</a
                >
              </li>
              <li>
                <a
                  href="{% url 'merchant_account:logout' %}"
                  class="text-brand-grayDark hover:text-[#0056B3]"
                  >登出</a
                >
              </li>
            {% elif user.username|slice:":9" == "customer_" %}
              <li>
                <a
                  href="{% url 'customers_account:dashboard' %}"
                  class="text-brand-grayDark hover:text-[#0056B3]"
                  >我的帳戶</a
                >
              </li>
              <li>
                <a
                  href="{% url 'customers_account:logout' %}"
                  class="text-brand-grayDark hover:text-[#0056B3]"
                  >登出</a
                >
              </li>
            {% else %}
              <li>
                <a
                  href="{% url 'customers_account:dashboard' %}"
                  class="text-brand-grayDark hover:text-[#0056B3]"
                  >我的帳戶</a
                >
              </li>
              <li>
                <a
                  href="{% url 'customers_account:logout' %}"
                  class="text-brand-grayDark hover:text-[#0056B3]"
                  >登出</a
                >
              </li>
            {% endif %}
          {% else %}
            <li>
              <a
                href="{% url 'pages:selectrole' %}"
                class="text-brand-grayDark hover:text-[#0056B3]"
                >登入/註冊</a
              >
            </li>
          {% endif %}
        </ul>
      <!-- 手機版選單 (預設隱藏) -->
      <div
        id="mobile-menu"
        class="hidden md:hidden mt-4 border-t border-brand-grayBorder"
      >
        <!-- 展開後的品牌名稱 -->
        <div class="px-4 py-2 font-bold text-brand-black text-lg">TruePay</div>
        <ul class="flex flex-col gap-2 px-4 py-2 text-sm font-medium">
          <li>
            <a
              href="{% url 'pages:home' %}"
              class="block text-[#0056B3] hover:underline"
              >首頁</a
            >
          </li>
          <li>
            <a
              href="{% url 'pages:about' %}"
              class="block text-brand-grayDark hover:text-[#0056B3]"
              >關於</a
            >
          </li>
          <li>
            <a
              href="{% url 'pages:contact' %}"
              class="block text-brand-grayDark hover:text-[#0056B3]"
              >聯絡</a
            >
          </li>
          {% if user.is_authenticated %}
            {% if user.username|slice:":9" == "merchant_" %}
              <li>
                <a
                  href="{% get_current_merchant %}"
                  class="block text-brand-grayDark hover:text-[#0056B3]"
                  >商家後台</a
                >
              </li>
              <li>
                <a
                  href="{% url 'merchant_account:logout' %}"
                  class="block text-brand-grayDark hover:text-[#0056B3]"
                  >登出</a
                >
              </li>
            {% elif user.username|slice:":9" == "customer_" %}
              <li>
                <a
                  href="{% url 'customers_account:dashboard' %}"
                  class="block text-brand-grayDark hover:text-[#0056B3]"
                  >我的帳戶</a
                >
              </li>
              <li>
                <a
                  href="{% url 'customers_account:logout' %}"
                  class="block text-brand-grayDark hover:text-[#0056B3]"
                  >登出</a
                >
              </li>
            {% else %}
              <li>
                <a
                  href="{% url 'customers_account:dashboard' %}"
                  class="block text-brand-grayDark hover:text-[#0056B3]"
                  >我的帳戶</a
                >
              </li>
              <li>
                <a
                  href="{% url 'customers_account:logout' %}"
                  class="block text-brand-grayDark hover:text-[#0056B3]"
                  >登出</a
                >
              </li>
            {% endif %}
          {% else %}
            <li>
              <a
                href="{% url 'pages:selectrole' %}"
                class="block text-brand-grayDark hover:text-[#0056B3]"
                >登入/註冊</a
              >
            </li>
          {% endif %}
        </ul>
      </div>
    </nav>

    <!-- 主內容區塊 -->
    <main class="max-w-screen-xl mx-auto px-6 py-12">
      {% block content %} {% endblock %}
    </main>

    <!-- 頁尾（可加上 components/footer.html） -->
    <footer class="bg-brand-grayLight text-center text-sm text-gray-500 py-6">
      &copy; {{ now|date:"Y" }} TruePay. All rights reserved.
    </footer>
  </body>
</html>
